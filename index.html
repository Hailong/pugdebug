<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Pugdebug by robertbasic</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Pugdebug</h1>
        <h2>A standalone PHP debugger</h2>

        <section id="downloads">
          <a href="https://github.com/robertbasic/pugdebug/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/robertbasic/pugdebug/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/robertbasic/pugdebug" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a id="pugdebug" class="anchor" href="#pugdebug" aria-hidden="true"><span class="octicon octicon-link"></span></a>pugdebug</h1>

<p>pugdebug is (well, should be) a PHP standalone debugger.</p>

<p>A python 3.4.x, pyqt5 project.</p>

<h2>
<a id="setting-up-the-environment" class="anchor" href="#setting-up-the-environment" aria-hidden="true"><span class="octicon octicon-link"></span></a>setting up the environment</h2>

<p>The main dependencies are Python 3.4,
<a href="http://doc.qt.io/qt-5/gettingstarted.html">QT5.4</a>,
<a href="http://www.riverbankcomputing.com/software/sip/download">SIP4.6</a>
and <a href="http://www.riverbankcomputing.com/software/pyqt/download5">PyQt5.4</a>.</p>

<p>I wrote a <a href="http://robertbasic.com/blog/install-pyqt5-in-python-3-virtual-environment">blog post</a>
about setting up a virtual environment for it.</p>

<p>Clone this repo and after setting up the virtual environment, install the application
requirements by running:</p>

<pre><code>pip install -r requirements.txt
</code></pre>

<p>After the requirements are installed, start pugdebug with a simple command:</p>

<pre><code>python app.py
</code></pre>

<p><a href="https://github.com/ihabunek">@ihabunek</a> and <a href="https://github.com/vranac">@vranac</a>
report that this process is pretty painless on Ubuntu and OSX machines. Some
package names might differ from what I used, but a document explaining the venv
setup process on different systems should be available soon.</p>

<p>Do note that I'm trying to figure out how to build executables for this beast.</p>

<h3>
<a id="os-x-setup-with-homebrew" class="anchor" href="#os-x-setup-with-homebrew" aria-hidden="true"><span class="octicon octicon-link"></span></a>OS X setup with Homebrew</h3>

<p>Easiest way to install dependencies on OS X is to use <a href="http://brew.sh/">Homebrew</a>.
To install the dependencies, execute the following commands from your terminal:</p>

<pre><code>brew install python3
brew install qt5 pyqt5 sip
</code></pre>

<p>Go to directory where you checked out the pugdebug, and execute</p>

<pre><code>python3 app.py
</code></pre>

<p>At the moment, there seems to be an issue with using virtualenv, python3 and pyqt5 on OS X Yosemite.</p>

<h2>
<a id="setting-up-xdebug" class="anchor" href="#setting-up-xdebug" aria-hidden="true"><span class="octicon octicon-link"></span></a>setting up xdebug</h2>

<p>To be able to debug PHP with pugdebug, you need to have <a href="http://xdebug.org/docs/remote">xdebug</a>
propely set up for remote debugging.</p>

<p>A minimal configuration would be something like:</p>

<pre><code>xdebug.idekey=pugdebug
xdebug.remote_enable=1
xdebug.remote_port=9000
xdebug.remote_host=127.0.0.1
</code></pre>

<p>If the project you want to debug is in a vagrant virtual machine, your xdebug
config should be something like:</p>

<pre><code>xdebug.idekey=pugdebug
xdebug.remote_enable=1
xdebug.remote_port=9000
xdebug.remote_connect_back=1
</code></pre>

<p>Do note that when debugging CLI scripts from a vagrant virtual machine, the
<code>remote_connect_back</code> setting will not work, and we need to use the
<code>remote_host</code> setting. The xdebug configuration should look something like:</p>

<pre><code>xdebug.idekey=pugdebug
xdebug.remote_enable=1
xdebug.remote_port=9000
xdebug.remote_host=33.33.33.1
</code></pre>

<p>You can find the IP address to use for the remote host setting by issuing the
following command on the host machine:</p>

<pre><code>ip addr
</code></pre>

<p>and a part of the output will include something like this:</p>

<pre><code>6: vboxnet2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UNKNOWN group default qlen 1000
    link/ether 0a:00:27:00:00:02 brd ff:ff:ff:ff:ff:ff
    inet 33.33.33.1/24 brd 33.33.33.255 scope global vboxnet2
       valid_lft forever preferred_lft forever
    inet6 fe80::800:27ff:fe00:2/64 scope link
       valid_lft forever preferred_lft forever
</code></pre>

<p>and from there we can see the IP address of <code>33.33.33.1</code>.</p>

<h2>
<a id="using-pugdebug" class="anchor" href="#using-pugdebug" aria-hidden="true"><span class="octicon octicon-link"></span></a>using pugdebug</h2>

<p>In a terminal go to the directory where you have pugdebug cloned and start it by
issuing a <code>python app.py</code> command.</p>

<p>On the left side you can see a simple file browser that should list your home
directory.</p>

<p>Under it is an input field with the label <code>Root:</code>, containing the path to your
home directory.</p>

<p>By entering a new root path in the <code>root</code> input field will change the root
directory of the file browser.</p>

<p>For example, on my laptop it starts with <code>/home/robert</code> and the file browser
lists my home directory. If I enter <code>/home/robert/www/pugdebug</code> into the <code>root</code>
input field, the file browser will change to the pugdebug web project.</p>

<p>But this is just temporary, it will be nicer in the future.</p>

<h2>
<a id="debugging-sessions" class="anchor" href="#debugging-sessions" aria-hidden="true"><span class="octicon octicon-link"></span></a>debugging sessions</h2>

<p>To start a debugging session, click the "Start" button in the top left corner.</p>

<p>Load your web project in your browser and start a
<a href="http://xdebug.org/docs/remote#browser_session">HTTP debugging session</a>.</p>

<p>pugdebug should pick up that session and display the index file of your web
project, while stopping the execution on the first line.</p>

<p>Using the <code>Run</code>, <code>Over</code>, <code>In</code>, <code>Out</code> continuation commands you can step through
your PHP code.</p>

<p>Setting breakpoints is possible by double clicking the line where a breakpoint
should be placed.</p>

<p>The correspoding line number should be highlighted and a new breakpoint should
be listed in the breakpoint viewer (bottom right corner).</p>

<p>Double clicking the line with a breakpoint should remove that breakpoint.</p>

<h2>
<a id="debugging-cli-scripts" class="anchor" href="#debugging-cli-scripts" aria-hidden="true"><span class="octicon octicon-link"></span></a>debugging cli scripts</h2>

<p>It is also possible to debug CLI scripts with pugdebug.</p>

<p>Start pugdebug as stated in the previous section, click <code>Start</code> to
start a debugging session and then in a second terminal type:</p>

<pre><code>export XDEBUG_CONFIG="idekey=pugdebug"
</code></pre>

<p>(or whatever you set the <code>xdebug.idekey</code> setting to) and then start
your PHP CLI script normally:</p>

<pre><code>php script.php
</code></pre>

<p>pugdebug should pick up the debugging session and let you debug your script.</p>

<h2>
<a id="executables" class="anchor" href="#executables" aria-hidden="true"><span class="octicon octicon-link"></span></a>executables</h2>

<p>I'm trying to make executables with
<a href="http://www.riverbankcomputing.com/software/pyqtdeploy/download">pyqtdeploy</a>.
So far I managed to create one for Fedora 21.</p>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>todo</h2>

<p>Take a look at the <a href="https://github.com/robertbasic/pugdebug/issues">issue tracker</a>.</p>

<h2>
<a id="contributions" class="anchor" href="#contributions" aria-hidden="true"><span class="octicon octicon-link"></span></a>contributions</h2>

<p>Contributions are more than welcome! Report bugs, tell me your ideas and needs,
write code, test it on different platforms ...</p>

<h2>
<a id="slack" class="anchor" href="#slack" aria-hidden="true"><span class="octicon octicon-link"></span></a>slack</h2>

<p>There's a slack created for pugdebug at <a href="https://pugdebug.slack.com/">https://pugdebug.slack.com/</a></p>

<p>If you would like access, open a <a href="https://github.com/robertbasic/pugdebug/issues">new ticket</a>.</p>
      </section>
    </div>

    
  </body>
</html>